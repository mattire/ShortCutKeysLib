<Window x:Class="ShortCutKeysLib.KeysConfWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ShortCutKeysLib"
        mc:Ignorable="d"
        Title="KeysConfWindow - Shortcuts" Height="450" Width="800">
    <Window.DataContext>
        <local:KeysConfWindowViewModel/>
    </Window.DataContext>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <!--<ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="Auto"/>-->
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Menu Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="0" VerticalAlignment="Top">
            <MenuItem Header="_File">
                <MenuItem Header="_Open" Click="MenuItem_Click" />
                <MenuItem Header="_Save as" Click="MenuItem_Click" />
                <MenuItem Header="_Default" Click="MenuItem_Click" />
            </MenuItem>
        </Menu>
        <Grid Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto" MinHeight="50"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Label Content="_Search" 
                Grid.Row="0" FontSize="12" Margin="10,0,0,0"
                Target="{Binding ElementName=SearchBox}"
               />
            <TextBox x:Name="SearchBox" Margin="10,0,10,0" Grid.Row="1" 
                 Text="" 
                 PreviewKeyDown="SearchBox_PreviewKeyDown"
                    Grid.ColumnSpan="2"
                 />
            <!--TextChanged="SearchTextChanged"-->
            <ListBox 
                ItemsSource="{Binding ShortcutVMs}"
                SelectedItem="{Binding SelectedShortcut, Mode=TwoWay}"
                x:Name="ActionList" Margin="10" Grid.Row="2"
                    Grid.ColumnSpan="2"
                    VirtualizingPanel.IsVirtualizing="True" VirtualizingPanel.VirtualizationMode="Recycling"
                            SelectionChanged="ActionList_SelectionChanged"
                            >
                <!--<ListBoxItem Content="aa"></ListBoxItem>
                <ListBoxItem Content="aa"></ListBoxItem>-->
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <Grid.RowDefinitions>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="300"/>
                                <ColumnDefinition Width="200"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="{Binding Name}"/>
                            <TextBlock Grid.Column="1"  Text="{Binding KeySeqStr}"/>
                            <TextBlock Grid.Column="2"  Text="{Binding Description}"/>
                        </Grid>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
            <TextBlock x:Name="InfoTextBlock" Margin="10" Grid.Row="3" 
                           FontSize="16"
                           Text="{Binding SelectedShortcut.KeySeqStr}" TextWrapping="Wrap"/>

            <TextBlock x:Name="NotificationBlock" Margin="10" 
                       Grid.Row="3" Grid.Column="1"
                       FontSize="16" 
                       Foreground="Red" 
                       Text="{Binding NotifStr}" TextWrapping="Wrap"/>

            <!--Text="Current key sequence = {Binding SelectedShortcut.KeySeqStr}" TextWrapping="Wrap"/>-->

            <Label Content="_Press shortcut keys" 
                Grid.Row="4" FontSize="12" Margin="10,0,0,0"
                Target="{Binding ElementName=ShortcutBox}"
               />
            <CheckBox x:Name="CheckBoxAllowPlainKeys"
                      IsChecked="True"
                Grid.Row="4" Grid.Column="1" 
                Margin="10,5,10,0"
                Content="Allow sequences with plain keys (no ctrl, etc..)"
                />
            <!--<TextBlock x:Name="Guide" Margin="5" Grid.Row="3" 
                           FontSize="12"
                           Text="Press new sequence" TextWrapping="Wrap"/>-->
            <!--<StackPanel Orientation="Horizontal" Grid.Row="4">-->
                <!--<Grid>-->
            <Grid Grid.Row="5" Grid.ColumnSpan="2">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <!---->
                        <ColumnDefinition Width="*"/>
                        <!--<ColumnDefinition Width="*"/>-->
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBox 
                    x:Name="ShortcutBox" 
                    Margin="10,0,0,10" 
                    Grid.Column="0" MinWidth="400" 
                    PreviewKeyDown="ShortcutBox_PreviewKeyDown"
                    KeyDown="ShortcutBox_KeyDown"
                    KeyUp="ShortcutBox_KeyUp"
                    Text="Press shortcut..."
                    FontSize="16"
                    
                    />
                <Button x:Name="ClearBtn"   Content="Clear"      Click="ClearKey_Click"  Margin="10" Padding="5" Grid.Column="1" />
                <Button x:Name="AssignBtn"  Content="Assign Key" Click="AssignKey_Click" Margin="10" Padding="5" Grid.Column="2" />
            </Grid>
                <!--</StackPanel>-->


            <!--<TextBlock Text="This window is inside the library!"
                VerticalAlignment="Center"
                HorizontalAlignment="Center"
                FontSize="16"/>-->
        </Grid>
    </Grid>

</Window>
